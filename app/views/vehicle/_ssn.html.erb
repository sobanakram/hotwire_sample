<div class="modal-content">
  <div class="modal-header border-0 pb-0">
    <div class="w-100 text-center">
      <h5 class="modal-title mb-0">Finalize your rate</h5>
    </div>
  </div>

  <div class="modal-body pt-3">
    <%= simple_form_for :vehicle, url: vehicle_success_path do |f| %>
      <div class="input-group mb-3">
        <%= f.input :ssn,
            placeholder: 'Enter your Social Security Number (SSN)',
            label: false,
            wrapper: false,
            input_html: { data: { mask: "000-00-0000" } } %>
        <span class="input-group-text">
          <i class="bi bi-shield-lock"></i>
        </span>
      </div>

      <div class="mb-4">
        <%= f.input :terms,
            as: :boolean,
            label: raw('I have read and agree to the ' + 
                      link_to("Credit Report Authorization", "#", class: "text-primary") +
                      ' and ' +
                      link_to("Terms & Conditions", "#", class: "text-primary")),
            required: true %>
      </div>

      <%= f.button :submit, 'Submit information', class: 'btn-primary w-100 mb-3' %>
      <%= link_to "Select a different offer", "#", 
          class: "btn btn-outline-primary w-100",
          data: { bs_dismiss: "modal" } %>
    <% end %>
  </div>
</div>

<%= content_for :head do %>
  <style>
    @media (max-width: 768px) {
      .modal-dialog {
        margin: 0;
      }
      
      .modal.show .modal-content {
        transform: translateY(0);
        transition: transform 0.3s ease-out;
      }

      .modal .modal-content {
        position: fixed;
        bottom: 0;
        left: 0;
        right: 0;
        margin: 0;
        max-height: 90vh;
        transform: translateY(100%);
      }
    }
  </style>
<% end %>
<script>new bootstrap.Modal(document.getElementById('ssn-modal')).show();</script>